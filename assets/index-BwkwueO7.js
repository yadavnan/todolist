(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();let c=JSON.parse(localStorage.getItem("todos"))||[];function E(t){c.push(t),s()}function L(t){const e=c.find(n=>n.id===parseInt(t,10));e&&(e.completed=!e.completed,s())}function j(t){c=c.filter(e=>e.id!==parseInt(t,10)),s()}function s(){localStorage.setItem("todos",JSON.stringify(c))}function S(){return c}let a=JSON.parse(localStorage.getItem("projects"))||[];function b(t){const e={id:Date.now(),name:t};a.push(e),P()}function h(){return a}function P(){localStorage.setItem("projects",JSON.stringify(a))}const l=document.getElementById("project-select"),T=document.getElementById("add-project-btn"),B=document.getElementById("add-todo-btn"),f=document.getElementById("todo-title"),g=document.getElementById("todo-description"),v=document.getElementById("todo-due-date"),y=document.getElementById("todo-priority"),p=document.getElementById("new-project-name"),m=document.getElementById("todo-list");document.addEventListener("DOMContentLoaded",()=>{I(),d()});function I(){const t=h();l.innerHTML='<option value="" disabled selected>Select a project</option>',t.forEach(e=>{const n=document.createElement("option");n.value=e.id,n.textContent=e.name,l.appendChild(n)})}function d(){const t=S();m.innerHTML="",t.forEach(e=>{const n=document.createElement("li");n.className=e.completed?"completed":"",n.innerHTML=`
      <div>
        <strong>${e.title}</strong> - ${e.dueDate} (${e.priority})
        <p>${e.description}</p>
      </div>
      <div>
        <button class="complete-btn">${e.completed?"Undo":"Complete"}</button>
        <button class="delete-btn">Delete</button>
      </div>
    `,m.appendChild(n),n.querySelector(".complete-btn").addEventListener("click",()=>{L(e.id),d()}),n.querySelector(".delete-btn").addEventListener("click",()=>{j(e.id),d()})})}T.addEventListener("click",()=>{const t=p.value.trim();t?(b(t),I(),p.value=""):alert("Please enter a valid project name.")});B.addEventListener("click",()=>{const t={title:f.value,description:g.value,dueDate:v.value,priority:y.value,completed:!1,projectId:parseInt(l.value,10),id:Date.now()};t.title&&t.description&&t.dueDate&&t.projectId?(E(t),d(),O()):alert("Please fill in all fields.")});function O(){f.value="",g.value="",v.value="",y.value=""}
